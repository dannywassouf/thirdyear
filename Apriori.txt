using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Diagnostics.Tracing;
using Cotur.DataMining.Association;
using System.Diagnostics.Tracing;
namespace Apiriori
{
    class Program
    {
        static void Main(string[] args)
        {
            Apriori ap1 = ExampleOne();
            
            //  Apriori ap2 = new Apriori();
            WriteApriori(ap1, .22f);

        }

        static Apriori ExampleOne()
        {
            List<string> fieldNames = new List<string>()
            {
                "I1","I2","I3","I4","I5"
            };

            List<List<int>> Transactions = new List<List<int>>(){

             new List<int>(){0,1,4},//I1,I2,I5
             new List<int>(){1,3},//I2,I4
             new List<int>(){1,2},
             new List<int>(){0,1,3},

           
            };
            Apriori myApiriori = new Apriori(new DataFields(5, Transactions, fieldNames));
            return myApiriori;
        }
        static void WriteApriori(Apriori Ap, float minsupport)
        {
            Ap.CalculateCNodes(minsupport);
           

            int table = 1;
            foreach (var i in Ap.EachLevelOfNodes)
            {
                Console.WriteLine("\n-- Table{0} --", table++);
                foreach (var node in i)
                {
                    Console.WriteLine(node.ToString(Ap.Data));
                    
                }
            }
            Console.WriteLine("\n-- rules --");
            foreach (var rules in Ap.Rules)
            {
                Console.WriteLine(rules.ToString(Ap.Rules));

            }
        }

    }
}
