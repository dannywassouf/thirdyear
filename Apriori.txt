using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Diagnostics.Tracing;
using Cotur.DataMining.Association;
using System.Diagnostics.Tracing;
namespace Apiriori
{
    class Program
    {
        static void Main(string[] args)
        {
            Apriori ap1 = ExampleOne();       //    «»⁄ „‰ √Ã· ≈‰‘«¡ €—÷ „‰ «·ŒÊ«—“„Ì… 
            
            //  Apriori ap2 = new Apriori();
            WriteApriori(ap1, .22f);          //  «»⁄ „‰ √Ã· ÿ»«⁄… «·‰ «∆Ã

        }

        static Apriori ExampleOne()
        {
            List<string> fieldNames = new List<string>()   // »‰«¡ «·„’›Ê›…(«·ﬁ«∆„…) «·Œ«’…»«·„Ê«œ  
            {
                "I1","I2","I3","I4","I5"
            };

            List<List<int>> Transactions = new List<List<int>>(){    // »‰«¡ „’›Ê›… „—»⁄… Œ«’… »«·ÃœÊ· «·—∆Ì”Ì 

             new List<int>(){0,1,4},//I1,I2,I5
             new List<int>(){1,3},//I2,I4
             new List<int>(){1,2},
             new List<int>(){0,1,3},

           
            };
            Apriori myApiriori = new Apriori(new DataFields(5, Transactions, fieldNames));  //  „—Ì— «·„⁄ÿÌ«  «·”«»ﬁ… ·€—÷ „‰ «·‰„ÿ Datafileds 
                                                                                            // Ê«·–Ì »œÊ—Â Ì„——Â« ··€—÷ „‰ ‰„ÿApriori
            return myApiriori;
        }
        static void WriteApriori(Apriori Ap, float minsupport)
        {
            Ap.CalculateCNodes(minsupport);      // Õ· «·ŒÊ«—“„Ì… »⁄œ Õ”«» minimume support
           

            int table = 1;
            foreach (var i in Ap.EachLevelOfNodes)         // Õ·ﬁ… ··„—Ê— ⁄·Ï «·Ãœ«Ê·
            {
                Console.WriteLine("\n-- Table{0} --", table++);
                foreach (var node in i)                    // Õ·ﬁ… ··„—Ê— ⁄·Ï „⁄·Ê„«  «·Ãœ«Ê· 
                {
                    Console.WriteLine(node.ToDetailedString(Ap.Data));   // ÿ»«⁄… «·‰ «∆Ã 
                    
                }
            }
           
        }

    }
}
